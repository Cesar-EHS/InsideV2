{% extends 'base.html' %}
{% block content %}
<div class="flex justify-center items-center min-h-[80vh]">
  <div class="w-full max-w-7xl bg-white rounded-2xl shadow-2xl p-10">
    <!-- Flexbox para la barra de arriba "sm:justify-between" -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4" >
      <a href="{{ url_for('cursos.index') }}" class="inline-flex items-center gap-2">
        <!-- Icono de flecha (puedes usar un SVG o una fuente de iconos) -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7" />
        </svg>
        <span class="text-base text-gray-700 font-semibold">Regresar</span>
      </a>
      <form method="POST" action="{{ url_for('cursos.inscribirse', curso_id=curso.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow">
          Inscribirme
        </button>
      </form>
    </div>
    <div class="w-full max-w-7xl mx-auto px-2 sm:px-6 pt-2 pb-2">
      <div class="flex flex-column flex-row sm:items-center sm:justify-between gap-2">
        <h1 class="text-3xl font-bold p-2 text-left"> {{ curso.nombre }} </h1>
        <p class="text-base text-gray-700 px-2 text-left sm:text-rigth">
          <span class="font-semibold text-gray-700">Capacitador:</span>
          {{ curso.creador.nombre }} {{ curso.creador.apellido_paterno }} {{ curso.creador.apellido_materno }}
        </p>
      </div>
    </div>
    <!-- Información del curso -->
    <div class="flex flex-col md:flex-row bg-white rounded-lg shadow-lg overflow-hidden mb-8">
      <div class="md:w-1/2 p-4 flex items-center justify-center">
        {% if curso.video_url %}
          <div class="w-full aspect-video rounded mb-4 overflow-hidden">
            <iframe
              class="w-full h-full rounded"
              src="https://www.youtube.com/embed/{{ curso.video_url | youtube_id }}"
              frameborder="0"
              allowfullscreen
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
            </iframe>
          </div>
        {% else %}
          <img src="{{ url_for('static', filename=curso.imagen if curso.imagen else 'cursos/img/default-curso.png') }}"
              alt="Imagen curso"
              class="object-cover rounded mb-4 w-full h-auto max-h-96">
        {% endif %}
      </div>

      <div class="md:w-1/2 p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Fila 1 para categoría -->
          <div>
            <label for="categoriaCurso" class="block font-bold text-gray-700 mb-1">
              <span class="material-icons text-yellow-500 text-base align-middle mr-1">category</span>
              Categoría:
            </label>
            <div>
              <p class="text-gray-600 leading-relaxed">
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                {{ curso.categoria.nombre }}
              </p>
            </div>
          </div>
          <!-- Fila 1: Modalidad -->
          <div>
            <label for="modalidadCurso" class="block font-bold text-gray-700 mb-1 flex items-center gap-2">
              <span class="material-icons text-yellow-500 text-base align-middle">computer</span>
              Modalidad:
            </label>
            <div>
              <p class="text-gray-600 leading-relaxed">
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                {{ curso.modalidad.nombre }}
              </p>
            </div>
          </div>
          <!-- Fila 2: Agente capacitador -->
          <div>
            <label for="agenteCurso" class="block font-bold text-gray-700 mb-1 flex items-center gap-2">
              <span class="material-icons text-yellow-500 text-base align-middle">person</span>
              Agente capacitador:
            </label>
            <div>
              <p class="text-gray-600 leading-relaxed">
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                {{ curso.tipo_agente.nombre }}
              </p>
            </div>
          </div>
          <!-- Fila 2: Duración -->
          <div>
            <label for="duracionCurso" class="block font-bold text-gray-700 mb-1 flex items-center gap-2">
              <span class="material-icons text-yellow-500 text-base align-middle">schedule</span>
              Duración:
            </label>
            <p class="text-gray-600 leading-relaxed">
              {% set h, m = curso.duracion.split(':') %}
              {% if h == '00' and m != '00' %}
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                {{ m|int }} minutos
              {% elif h == '01' and m == '00' %}
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                1 hora
              {% elif h != '00' and m == '00' %}
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                {{ h|int }} horas
              {% elif h != '00' and m != '00' %}
                <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
                {{ h|int }} hora{{ 's' if h|int > 1 else '' }} y {{ m|int }} minutos
              {% endif %}
            </p>
          </div>
          <!-- Fila 3: Objetivo (ocupa toda la fila) -->
          <div class="md:col-span-2">
            <label for="objetivoCurso" class="block font-bold text-gray-700 mb-1 flex items-center gap-2">
              <span class="material-icons text-yellow-500 text-base align-middle">flag</span>
              Objetivo:
            </label>
            <p class="text-gray-600 leading-relaxed">
              <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
              {{ curso.objetivo.descripcion }}</p>
          </div>
          <!-- Fila 4: Área temática (ocupa toda la fila) -->
          <div class="md:col-span-2">
            <label for="areaCurso" class="block font-bold text-gray-700 mb-1 flex items-center gap-2">
              <span class="material-icons text-yellow-500 text-base align-middle">school</span>
              Área temática:
            </label>
            <p class="text-gray-600 leading-relaxed">
              <span class="text-yellow-500 font-bold pl-2 ml-6">-</span>
              {{ curso.area_tematica.nombre }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<script>
  // Tabs simples con JS vanilla
  document.addEventListener('DOMContentLoaded', function() {
    var links = document.querySelectorAll('.tab-link');
    var tabs = document.querySelectorAll('.tab-content');
    for (var i = 0; i < links.length; i++) {
      links[i].addEventListener('click', function(e) {
        e.preventDefault();
        for (var j = 0; j < links.length; j++) { links[j].classList.remove('active'); }
        for (var k = 0; k < tabs.length; k++) { tabs[k].classList.add('hidden'); }
        this.classList.add('active');
        var tabId = this.getAttribute('href');
        var tab = document.querySelector(tabId);
        if (tab) { tab.classList.remove('hidden'); }
      });
    }
    // Mostrar el primer tab por defecto
    if (tabs.length > 0) {
      tabs[0].classList.remove('hidden');
    }
  });
</script>
{% endblock %}
