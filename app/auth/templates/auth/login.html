<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Iniciar sesión - Sistema EHS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- CSS personalizado para login -->
    <link rel="stylesheet" href="{{ url_for('auth.static', filename='css/login.css') }}" />

    <!-- JS personalizado para login -->
    <script defer src="{{ url_for('auth.static', filename='js/login.js') }}"></script>
</head>
<body class="bg-gray-100">
    <div class="flex min-h-screen animate-fade-in">
        <!-- LADO IZQUIERDO -->
        <div class="hidden md:flex w-1/2 bg-[#e5e5e5] text-white items-center justify-center p-10">
            <div class="text-center">
                <img src="{{ url_for('auth.static', filename='img/logo_inside.png') }}" alt="Inside" class="h-20 mb-6 mx-auto" />
                <h2 id="greeting" class="text-4xl font-bold mb-2" style="color: #3b3b3c;">¡Bienvenido!</h2>
                <p class="text-lg" style="color: #3b3b3c;">Conecta con el conocimiento de EHStandard.</p>
            </div>
        </div>

        <!-- LADO DERECHO: Login -->
        <div class="w-full md:w-1/2 bg-white flex items-center justify-center p-8">
            <div class="max-w-md w-full transition-all duration-700 ease-in-out transform scale-100">
                <h2 class="text-3xl font-bold text-[#3b3b3c] mb-1">Iniciar sesión</h2>
                <p class="text-sm text-gray-500 mb-6">Accede a tu cuenta institucional</p>

                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="bg-red-100 text-red-800 text-sm p-2 mb-4 rounded">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <form action="{{ url_for('auth.login') }}" method="POST" class="space-y-5" onsubmit="showLoader()">
                    {{ form.hidden_tag() }}

                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Correo electrónico</label>
                        {{ form.email(class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#fab522]", id="email") }}
                    </div>

                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
                        <div class="relative mt-1">
                            {{ form.password(class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm pr-10 focus:outline-none focus:ring-2 focus:ring-[#fab522]", id="password") }}
                            <i class="ph ph-eye absolute right-3 top-2.5 text-xl text-gray-500 cursor-pointer" id="eyeIcon" onclick="togglePassword()"></i>
                        </div>

                    </div>

                    <div>
                        {{ form.submit(class_="w-full bg-[#fab522] hover:bg-yellow-600 text-[#3b3b3c] font-semibold py-2 px-4 rounded-md shadow flex items-center justify-center gap-2", id="loginBtn") }}
                    </div>

                    <div class="text-center mt-3">
                        <a href="{{ url_for('auth.reset_password_request') }}" class="text-sm text-[#3b3b3c] hover:underline">¿Olvidaste tu contraseña?</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
