<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Restablecer contraseña - Sistema EHS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script defer src="{{ url_for('auth.static', filename='js/reset_password.js') }}"></script>
</head>
<body class="bg-gray-100">
    <div class="flex min-h-screen animate-fade-in">
        <!-- LADO IZQUIERDO -->
        <div class="hidden md:flex w-1/2 bg-[#e5e5e5] text-white items-center justify-center p-10">
            <div class="text-center">
                <img src="{{ url_for('auth.static', filename='img/logo_inside.png') }}" alt="Inside" class="h-20 mb-6 mx-auto" />
                <h2 class="text-4xl font-bold mb-2" style="color: #3b3b3c;">¡Actualiza tu acceso!</h2>
                <p class="text-lg" style="color: #3b3b3c;">Establece tu nueva contraseña institucional.</p>
            </div>
        </div>

        <!-- LADO DERECHO: Formulario -->
        <div class="w-full md:w-1/2 bg-white flex items-center justify-center p-8">
            <div class="max-w-md w-full">
                <h2 class="text-3xl font-bold text-[#3b3b3c] mb-1">Restablecer contraseña</h2>
                <p class="text-sm text-gray-500 mb-6">Ingresa tu nueva contraseña a continuación</p>

                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="bg-red-100 text-red-800 text-sm p-2 mb-4 rounded">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <form id="resetPasswordForm" action="{{ url_for('auth.reset_password', token=token) }}" method="POST" class="space-y-5" onsubmit="showLoader()">
                    {{ form.hidden_tag() }}

                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Nueva contraseña</label>
                        <div class="relative mt-1">
                            {{ form.password(class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm pr-10 focus:outline-none focus:ring-2 focus:ring-[#fab522]", id="password") }}
                            <i class="ph ph-eye absolute right-3 top-2.5 text-xl text-gray-500 cursor-pointer" id="eyeIcon1"></i>
                        </div>
                    </div>

                    <div>
                        <label for="confirm_password" class="block text-sm font-medium text-gray-700">Confirmar contraseña</label>
                        <div class="relative mt-1">
                            {{ form.confirm_password(class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm pr-10 focus:outline-none focus:ring-2 focus:ring-[#fab522]", id="confirm_password") }}
                            <i class="ph ph-eye absolute right-3 top-2.5 text-xl text-gray-500 cursor-pointer" id="eyeIcon2"></i>
                        </div>
                    </div>

                    <div>
                        {{ form.submit(class_="w-full bg-[#fab522] hover:bg-yellow-600 text-[#3b3b3c] font-semibold py-2 px-4 rounded-md shadow flex items-center justify-center gap-2", id="submitBtn") }}
                    </div>

                    <div class="text-center mt-3">
                        <a href="{{ url_for('auth.login') }}" class="text-sm text-[#3b3b3c] hover:underline">Volver a iniciar sesión</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
